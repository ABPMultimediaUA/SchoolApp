<!doctype html>
<html>
<head>
  <title>Autorización</title>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/style.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

  <!-- LOAD JQUERY -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <!-- LOAD ANGULAR -->
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular.min.js"></script>

  
        <style>
            .ng-valid.ng-dirty{
                border-color: green;
            }
            .ng-invalid.ng-dirty{
                border-color: red;
            }
        </style>
</head>
<!-- apply the module and controller to our body so angular is applied to that -->
<body  ng-app='myApp' ng-controller='controlador'>
<header>
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="containerHeader">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="pagUser.html" target="_blank"><img src="img/logoAlpha.png" class="img-responsive " alt="Logotipo" width="100 "></a>
                </div>
                <!-- Collect the nav links, forms, and other content for toggling -->
                <ul class="nav navbar-nav">
                    <li>
                        <a href="pageProfesor.html"><span class="glyphicon glyphicon-triangle-left"></span> Volver</a>
                    </li>

                </ul>
                <ul  class="nav navbar-nav navbar-right">
                    <li class="user">
                        <!--Con el enlace se accede a los datos del usuario "Mis Datos"  -->
                        <h3><a href="datosProfe.html" target="_blank"><img src="img/chico.png" class="img-circle" alt="user"></a> MARTÍNEZ GARCÍA, JUAN </h3>
                    </li>
                    <li>
                        <a href="index.html"><span class="glyphicon glyphicon-log-out"></span> Logout</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
<style type="text/css" media="screen">
  .container{position:relative; top:5%;}
</style>
<div class="container">
<div class="col-md-6 col-md-offset-3">
<select name="selectcomunicadodo" onchange="cambiarContenido();">
  <option value="1" >CREAR COMUNICADO</option>
  <option value="2">VER COMUNICADOS</option>
</select>
<br>
<select name="selectcomunicadotype" >
  <option value="1">Autorización</option>
  <option value="1">Justificante</option>
  <option value="1">Anuncio</option>
</select>

 <div class="row">
                <div class="col-lg-8">
                    Elija el curso: 
                    <select name="cursosSelect" id="cursosSelect" multiple>
                        <option value="0">TODOS</option>
                        <option value="1">Curso 1</option>
                        <option value="2">Curso 2</option>
                        <option value="3">Curso 3</option>
                    </select>
                    <br>
                    Elija la asignatura:
                    <select name="asignaturasSelect" id="asignaturasSelect" multiple>
                        <option value="0">TODAS</option>
                        <option value="1">Asignatura 1</option>
                        <option value="2">Asignatura 2</option>
                        <option value="3">Asignatura 3</option>
                    </select>
                    <br>
                    Elija alumno:
                    <select name = "alumnosSelect" multiple>
                       <option value="0">TODOS</option>
                        <option value="1">Alumno 1</option>
                        <option value="2">Alumno 2</option>
                        <option value="3">Alumno 3</option>
                    </select>
                    
                </div>
                <div id="magia">
                <input type='text' placeholder='titulo'/><textarea name='creacomunicado'></textarea> <input type='submit' value='Enviar'/>
                </div>
            </div>
</div>
</div>

<script>
function cambiarContenido()
{
if(document.getElementsByName("selectcomunicadodo")[0].value==1)
{
  document.getElementById("magia").innerHTML="<input type='text' placeholder='titulo'/><textarea name='creacomunicado'></textarea> <input type='submit' value='Enviar'/>";
}

if(document.getElementsByName("selectcomunicadodo")[0].value==2)
{
  document.getElementById("magia").innerHTML="<ul><li>SE CANCELAN LAS CLASES <br> 1ºESO </li><li>SE REANUDAN LAS CLASES <br> 1ºESO </li></ul> ";
}
}
</script>
<!--
  <H1>AUTORIZACIÓN</H1>
      <div id="contenido">
          <p>Introduce el número de ID de la autorización del que deseas consultar los datos</p>
          <p>(Esto en un futuro habrá que quitarlo)</p>
      </div>
      <section id="seccion">
          <input type="number" id="num" >
          <button type="" ng-click="reload()">Consultar</button>
      </section>
         <section id="seccion">
                   <article name = "alias" ng-repeat='datos in seleccionado'>          
                     <h1>{{ datos.tipo }}</h1>       
                        <p>Mensaje: {{ datos.texto }}</p> 
                   </article>  
        </section>

  <div>
    <form name = "adminForm" ng-submit="firmar()" novalidate>

      <!-- SUBMIT BUTTON 
      <button  type = "submit"  ng-show="!showButton"  class="btn btn-success btn-lg btn-block">
         <span class="glyphicon glyphicon-flash"></span>Firmar!
      </button>
      <p ng-show="showButton">¡Firmado!</p>
    </form>
  </div>
</div>
</div> -->

<!-- PROCESS FORM WITH AJAX (NEW) -->
  <script>
//GET
          /*  var item = sessionStorage.getItem("id");
            if(item!=null){
                document.getElementById("num").value=item;
            } 

            var id=document.getElementById("num").value;
            var id2 = document.getElementById("num").value;
            var aux = document.getElementById("num").value;
            var bool = false;

            if(id == null || id <=0){
                idAu="";
                bool = true;
            }else{
                idAu="id/"+id;
                bool = false;
            }

            var app = angular.module('myApp', []);


                
            app.controller('controlador', function($scope, $http) { 
            	$scope.seleccionado = {simple: []};
                if(bool == false){
                    var self = this;
                    $http({
                        url: "http://localhost/prueba_api/alpha2/index.php/comunicado/comunicado/"+idAu+"/format/json", 
                        method: "GET",
                        params: {id: id}
                    })
                     .then(function(response) {
                        self.compuesto = angular.fromJson(response.data);
                        
                        $scope.seleccionado.simple = self.compuesto;

				        if($scope.seleccionado.simple.firmado == "true"){
				     	  	$scope.showButton = true;
				        }else{
				         	$scope.showButton = false;
				        }
                    }, function errorCallback(response) {
                        alert()
                    });
                }

                $scope.reload = function() {  
                    sessionStorage.setItem("id", document.getElementById("num").value);
                    location.reload();   
                }


	          $scope.json2 = {};
	          $scope.salida = {};	
	          console.log($scope.seleccionado.simple)
 
	          $scope.firmar = function(){
	          	$scope.seleccionado.simple.firmado = "true";
	          	$scope.showButton = true;
	            $http({
	                method  : 'PUT',
	                url     : 'http://localhost/prueba_api/alpha2/index.php/comunicado/comunicado',
	                data    : $.param($scope.seleccionado.simple),  // pass in data as strings
	                headers : { 'Content-Type': 'application/x-www-form-urlencoded' }  // set the headers so angular passing info as form data (not request payload)
	            })
	                .success(function(data) {
	                  //Prueba REST /*
	                  $scope.json2 = data;
	                  if($scope.json2.length == 0){
	                   // $scope.salida.texto = $scope.json2[i];
	                  };
	                  if($scope.json2.length == 1){
	                    $scope.salida.texto = $scope.json2[0];
	                  };
	                  if($scope.json2.length == 2){
	                    $scope.salida.texto = $scope.json2[0] + "" + $scope.json2[1] ;
	                  };
	                  if($scope.json2.length == 3){
	                    $scope.salida.texto = $scope.json2[0] + "" + $scope.json2[1] + "" + $scope.json2[2];
	                  };
	                }); 

	          }


            });




//PUTvar 
    

    app.directive('alias', function() {
            var directive = {};
            directive.restrict = 'E';
            directive.template = "<b>{{alias.texto}}</b>";
            
            directive.scope = {
               alias : "=name"
            }
            return directive;
    });*/
  </script>
</body>
</html>